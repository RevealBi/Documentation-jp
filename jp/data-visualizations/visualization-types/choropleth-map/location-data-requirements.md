## 階級区分図のデータを準備する方。法場所のデータ要件

データセットの**場所名**列は、選択したマップの実際の地理単位と一致する必要があります。たとえば、列に国の名前が含まれているが、アメリカ合衆国の州のマップを使用する場合、「表示するデータはありません。」というエラーが画面に表示されます。このエラーの詳細については、以下の[「エラーのトラブルシューティング」](#エラーのトラブルシューティング)を参照してください。

<a name='location-formats'></a>
### 場所の形式
場所列を Reveal に認識させるには、以下のいずれかの形式を指定します。

 - 国の**名前**およびその下位区分 (省、州、部、地域など) - 英語またはサポートされる他の言語の公式スペルに準拠します。サポートされる言語の詳細については、以下の[「データソースが英語ではありません」](#data-not-in-english)を参照してください。
 - [ISO 3166-1 alpha-3](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) 規格で定義される **3 文字の国コード**。
 - USPS によって確立された [*2 文字の米国州の略語*](https://pe.usps.com/text/pub28/28apb.htm)。
 - [郡名、州名] の形式 (_Seneca、New York_ など)。この形式は、郡を含む米国のマップに使用できます。
 - [郡名、州の略語] の形式 (_Seneca、NY_ など)。これは、郡を含む米国のマップで認識されるもう 1 つの形式です。

指定した形式と一致している必要があります。同じ列に完全名とコードを使用しないでください。ただし、**一般的に使用される国の略語***には例外があります。以下は、場所の列で国の完全名と組み合わせることができ、それらを Reveal で認識できるようにする省略された国名のリストです。

| 国の完全名        | 略語 |
|--------------------------|-----------------------|
| United States            | USA                   |
| United Kingdom           | UK                    |
| United Arab Emirates     | UAE                   |
| South Korea              | S. Korea              |
| South Africa             | S. Africa             |
| North Korea              | N. Korea              |
| North Macedonia          | N. Macedonia          |
| Northern Cyprus          | N. Cyprus             |
| Central African Republic | Central African Rep.  |
| N. Mariana Island        | N. Mariana Is.        |
| U.S. Virgin Island       | U.S. Virgin Is.       |
| South Sandwich Islands   | South Sandwich Is.    |
| British Indian Teritory  | British Indian Ter.   |
| Falkland Island          | Falkland Is.          |
| British Virgin Island    | BVI                   |
| Trinidad and Tobago      | Trin./Tob             |
| Solomon Islands          | Solomon Is.           |
| St. Pierre and Miquelon  | St. Pierre            |
| Fr. S. Antarctic Lands   | Fr. S. Antarctic      |
| Equatorial Guinea        | Eq. Guinea            |

<a name='troubleshooting-choropleth-map'></a>
### エラーのトラブルシューティング

階級区分図は、使用可能な一致を検索するように設計されています。このように、部分的な結果のマップが正しく表示されませんが、動作します。
たとえば、米国の州のマップを使用する場合、Reveal はマップに一致する州を表示し、その他の州はグレーアウトされます。

#### 階級区分図のトラブルシューティング

**「表示するデータはありません」** というエラーが表示される場合、定義済みのマップが提供された情報と一致していません。この問題をトラブルシューティングするには、以下の手順をお試しください。

1. **表示形式エディターの確認**
   
    - [場所] プレースホルダーで誤ったフィールドを割り当てた可能性があります。[場所] フィールドに大陸、国、州などの地理単位が含まれているかどうかを確認します。
  
    - [値] プレースホルダーのフィールドに、選択した場所の情報が含まれていない場合があります。[マップの色] プレースホルダーでカテゴリを追加した場合、[値] フィールドにこのカテゴリの情報を含める必要があります。たとえば、州ごとに候補者の投票を比較する場合、各候補者の投票に関する情報が必要です。
  
    - また、マップ セレクターで正しいマップを選択したことを確認してください。
  
    - ドリルダウン時にエラーが発生した場合は、マップ セレクターにドリルダウンするレベルのマップが含まれていることを確認してください。たとえば、現在スイスの州はマップ セレクターで使用できないため、データソースに必要な情報がある場合でもスイスにドリルダウンできません。

2. **データソースの確認**データソースが空であるか、あるいは場所のデータがない場合があります。空でない場合は、つづりの間違いや奇妙な句読点を検索してみてください。正しい[場所の形式](#場所の形式)を使用しているかどうかを確認します。データソースの内容が英語で記載されていない場合は、[「データソースが英語ではありません」](#データソースが英語ではありません)セクションに移動してください。

期待どおりの結果が得られなかった場合は、このトピックを含む、[「階級区分図」](Choropleth-map.html)および[「階級区分図設定の操作」](settings-choropleth-map.html)トピック全体を参照してください。

#### 一般的なトラブルシューティングのヒント

- *問題の特定*できる限り問題を特定します。たとえば、特定の場所を使用できない場合は、別の場所または別のデータソースを使用してみてください。問題を特定するには、一度に多くの設定を変更するのではなく、特定の設定を変更して結果を観察します。

- *実行した手順を記録*トラブルシューティングを開始したら、実際に行った手順を記録しておきます。実行した手順を記録し、再現できることにより、問題の特定を効率的に行うことができます。

<a name='data-not-in-english'></a>
### データソースが英語ではありません

Reveal はデータソースの言語を自動的に認識しません。
データソース情報が他の言語で記述されている場合、以下のように指定する必要があります。

表示形式エディター > [設定] > [データが以下の言語に書き込まれています]、ドロップダウンから言語を選択します。

現在、Reveal の階級区分図は以下の言語をサポートします。

    * 英語と
    * 日本語

データソースの場所情報が異なる言語で記述されている場合、Reveal 以外で翻訳する必要があります。

>[!NOTE]
>**日本のマップで日本語のデータソースを使用**
>日本語のデータソースを使用して日本のマップを表示し、すべての日本の都道府県をマップしたい場合は、[この表](https://ja.wikipedia.org/wiki/%E9%83%BD%E9%81%93%E5%BA%9C%E7%9C%8C#%E4%BA%94%E5%8D%81%E9%9F%B3%E9%A0%86%E3%83%BB%E5%9F%BA%E7%A4%8E%E3%83%87%E3%83%BC%E3%82%BF)の形式とおりに位場所のデータを提供する必要があります。

